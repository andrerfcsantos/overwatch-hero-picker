const state = {
  heroes: {
    dva: {
      name: "D.Va",
      role: "TANK",
      selected: false,
      key: "dva",
    },
    orisa: {
      name: "Orisa",
      role: "TANK",
      selected: false,
      key: "orisa",
    },
    reinhardt: {
      name: "Reinhardt",
      role: "TANK",
      selected: false,
      key: "reinhardt",
    },
    roadhog: {
      name: "Roadhog",
      role: "TANK",
      selected: false,
      key: "roadhog",
    },
    winston: {
      name: "Winston",
      role: "TANK",
      selected: false,
      key: "winston",
    },
    wreckingball: {
      name: "Wrecking Ball",
      role: "TANK",
      selected: false,
      key: "wreckingball",
    },
    zarya: {
      name: "Zarya",
      role: "TANK",
      selected: false,
      key: "zarya",
    },
    bastion: {
      name: "Bastion",
      role: "DAMAGE",
      selected: false,
      key: "bastion",
    },
    doomfist: {
      name: "Doomfist",
      role: "TANK",
      selected: false,
      key: "doomfist",
    },
    genji: {
      name: "Genji",
      role: "DAMAGE",
      selected: false,
      key: "genji",
    },
    hanzo: {
      name: "Hanzo",
      role: "DAMAGE",
      selected: false,
      key: "hanzo",
    },
    junkrat: {
      name: "Junkrat",
      role: "DAMAGE",
      selected: false,
      key: "junkrat",
    },
    cassidy: {
      name: "Cassidy",
      role: "DAMAGE",
      selected: false,
      key: "cassidy",
    },
    mei: {
      name: "Mei",
      role: "DAMAGE",
      selected: false,
      key: "mei",
    },
    pharah: {
      name: "Pharah",
      role: "DAMAGE",
      selected: false,
      key: "pharah",
    },
    reaper: {
      name: "Reaper",
      role: "DAMAGE",
      selected: false,
      key: "reaper",
    },
    soldier76: {
      name: "Soldier: 76",
      role: "DAMAGE",
      selected: false,
      key: "soldier76",
    },
    sombra: {
      name: "Sombra",
      role: "DAMAGE",
      selected: false,
      key: "sombra",
    },
    symmetra: {
      name: "Symmetra",
      role: "DAMAGE",
      selected: false,
      key: "symmetra",
    },
    torbjorn: {
      name: "Torbjörn",
      role: "DAMAGE",
      selected: false,
      key: "torbjorn",
    },
    tracer: {
      name: "Tracer",
      role: "DAMAGE",
      selected: false,
      key: "tracer",
    },
    widowmaker: {
      name: "Widowmaker",
      role: "DAMAGE",
      selected: false,
      key: "widowmaker",
    },
    ana: {
      name: "Ana",
      role: "SUPPORT",
      selected: false,
      key: "ana",
    },
    brigitte: {
      name: "Brigitte",
      role: "SUPPORT",
      selected: false,
      key: "brigitte",
    },
    lucio: {
      name: "Lúcio",
      role: "SUPPORT",
      selected: false,
      key: "lucio",
    },
    mercy: {
      name: "Mercy",
      role: "SUPPORT",
      selected: false,
      key: "mercy",
    },
    moira: {
      name: "Moira",
      role: "SUPPORT",
      selected: false,
      key: "moira",
    },
    zenyatta: {
      name: "Zenyatta",
      role: "SUPPORT",
      selected: false,
      key: "zenyatta",
    },
    baptiste: {
      name: "Baptiste",
      role: "SUPPORT",
      selected: false,
      key: "baptiste",
    },
    sigma: {
      name: "Sigma",
      role: "TANK",
      selected: false,
      key: "sigma",
    },
    ashe: {
      name: "Ashe",
      role: "DAMAGE",
      selected: false,
      key: "ashe",
    },
    echo: {
      name: "Echo",
      role: "DAMAGE",
      selected: false,
      key: "echo",
    },
    sojourn: {
      name: "Sojourn",
      role: "DAMAGE",
      selected: false,
      key: "sojourn",
    },
    junkerqueen: {
      name: "Junker Queen",
      role: "TANK",
      selected: false,
      key: "junkerqueen",
    },
    kiriko: {
      name: "Kiriko",
      role: "SUPPORT",
      selected: false,
      key: "kiriko",
    },
    ramattra: {
      name: "Ramattra",
      role: "TANK",
      selected: false,
      key: "ramattra",
    },
    lifeweaver: {
      name: "lifeweaver",
      role: "SUPPORT",
      selected: false,
      key: "lifeweaver",
    },
    illari: {
      name: "Illari",
      role: "SUPPORT",
      selected: false,
      key: "illari",
    },
    mauga: {
      name: "Mauga",
      role: "TANK",
      selected: false,
      key: "mauga",
    },
    venture: {
      name: "Venture",
      role: "DAMAGE",
      selected: false,
      key: "venture",
    },
    juno: {
      name: "Juno",
      role: "SUPPORT",
      selected: false,
      key: "juno",
    },
    hazard: {
      name: "Hazard",
      role: "TANK",
      selected: false,
      key: "hazard",
    },
    freja: {
      name: "Freja",
      role: "DAMAGE",
      selected: false,
      key: "freja",
    },
    anran: {
      name: "Anran",
      role: "DAMAGE",
      selected: false,
      key: "anran",
    },
    domina: {
      name: "Domina",
      role: "TANK",
      selected: false,
      key: "domina",
    },
    emre: {
      name: "Emre",
      role: "DAMAGE",
      selected: false,
      key: "emre",
    },
    jetpackcat: {
      name: "Jetpack Cat",
      role: "SUPPORT",
      selected: false,
      key: "jetpackcat",
    },
    mizuki: {
      name: "Mizuki",
      role: "SUPPORT",
      selected: false,
      key: "mizuki",
    },
    wuyang: {
      name: "Wuyang",
      role: "SUPPORT",
      selected: false,
      key: "wuyang",
    },
    vendetta: {
      name: "Vendetta",
      role: "DAMAGE",
      selected: false,
      key: "vendetta",
    },
  },
};

function hero_comparator_by_key(hero1, hero2) {
  return hero1.name.localeCompare(hero2.name);
}

const getters = {
  getHeroes: (state) => {
    return Object.keys(state.heroes)
      .map((key) => state.heroes[key])
      .sort(hero_comparator_by_key);
  },
  getByRole: (state, getters) => (role) => {
    return getters.getHeroes.filter((hero) => hero.role == role);
  },
  getBySelectedByRole: (state, getters) => (role) => {
    return getters.getHeroes.filter(
      (hero) => hero.role == role && hero.selected
    );
  },
  getTanks: (state, getters) => {
    return getters.getByRole("TANK");
  },
  getSelectedTanks: (state, getters) => {
    return getters.getByRole("TANK").filter((h) => h.selected);
  },
  getSupport: (state, getters) => {
    return getters.getByRole("SUPPORT");
  },
  getSelectedSupport: (state, getters) => {
    return getters.getByRole("SUPPORT").filter((h) => h.selected);
  },
  getDamage: (state, getters) => {
    return getters.getByRole("DAMAGE");
  },
  getSelectedDamage: (state, getters) => {
    return getters.getByRole("DAMAGE").filter((h) => h.selected);
  },
  getSelected: (state, getters) => {
    return getters.getBySelectedStatus(true);
  },
  getBySelectedStatus: (state) => (selected) => {
    return Object.keys(state.heroes)
      .map((key) => state.heroes[key])
      .filter((hero) => hero.selected == selected)
      .sort(hero_comparator_by_key);
  },
};

// actions
const actions = {
  setHeroSelectedStatus({ commit }, { hero_key, selected }) {
    commit("setHeroSelectStatus", { hero_key, selected });
  },
  toggleHero({ commit }, hero_key) {
    commit("toggleHero", hero_key);
  },
  selectByRole({ commit }, role) {
    commit("setStateByRole", { role: role, selectedState: true });
  },
  selectJustRole({ commit }, role) {
    commit("selectJustRole", { role: role });
  },
  unselectByRole({ commit }, role) {
    commit("setStateByRole", { role: role, selectedState: false });
  },
};

// mutations
const mutations = {
  setHeroSelectStatus(state, { hero_key, selected }) {
    state.heroes[hero_key].selected = selected;
  },
  toggleHero(state, hero_key) {
    state.heroes[hero_key].selected = !state.heroes[hero_key].selected;
  },
  setStateByRole(state, { role, selectedState }) {
    for (let hero_key in state.heroes) {
      if (state.heroes[hero_key].role === role) {
        state.heroes[hero_key].selected = selectedState;
      }
    }
  },
  selectJustRole(state, { role }) {
    for (let hero_key in state.heroes) {
      if (state.heroes[hero_key].role === role) {
        state.heroes[hero_key].selected = true;
      } else {
        state.heroes[hero_key].selected = false;
      }
    }
  },
};

export default {
  namespaced: true,
  state,
  getters,
  actions,
  mutations,
};
